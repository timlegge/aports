# Automatically generated by apkbuild-cpan, template 2
# Contributor: Timothy Legge <timlegge@gmail.com>
# Maintainer: Timothy Legge <timlegge@gmail.com>
pkgname=perl-net-saml2
_pkgreal=Net-SAML2
pkgver=0.19.05
pkgrel=0
pkgdesc="SAML bindings and protocol implementation"
url="https://metacpan.org/release/Net-SAML2/"
arch="noarch"
license="GPL-1.0-or-later Artistic-1.0-Perl"
cpandepends="perl-libwww perl-crypt-openssl-bignum perl-crypt-openssl-dsa perl-crypt-openssl-random perl-crypt-openssl-rsa perl-crypt-openssl-verifyx509 perl-crypt-openssl-x509 perl-digest-sha1 perl-mime-base64 perl-datetime-format-xsd perl-class-accessor perl-moose perl-moosex-types perl-moosex-types-common perl-moosex-types-datetime perl-moosex-types-uri perl-uri perl-xml-canonicalizexml perl-xml-generator perl-xml-xpath perl-xml-tidy perl-file-slurp"
cpanmakedepends="perl-file-remove perl-module-install perl-yaml perl-yaml-tiny perl-www-mechanize perl-devel-overloadinfo"
cpancheckdepends="perl-dancer"
depends="$cpandepends"
makedepends="$cpanmakedepends"
checkdepends="$cpancheckdepends"
subpackages="$pkgname-doc"
source="https://github.com/timlegge/perl-Net-SAML2/archive/$pkgname-$pkgver.tar.gz
        version.patch"
builddir="$srcdir/perl-$_pkgreal-$pkgname-$pkgver"

build() {
	echo $builddir
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl -I. Makefile.PL INSTALLDIRS=vendor
	make
}

check() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make test
}

package() {
	make DESTDIR="$pkgdir" install
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="209bc6dfc00ddcdbb56b90ed43aa2d52f66371d77bbd60ed08d6e36e348657e8286593822a46f797bde12b8a3cff1a18dfe1c7892775ad2c9e3a00f4cbaeb264  perl-net-saml2-0.19.05.tar.gz
385fabcc43a898a5e3d05ba6f1e5a0b2847b92a4781235095dc7dfbf998332badcb416c12e7069e05ccce0d604453925e25139d744401a5b134bc05c933c2274  version.patch"
